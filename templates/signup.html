<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - Anokha</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Dosis:wght@200..800&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Teko:wght@300..700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="/static/css/login.css" rel="stylesheet">
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top">
        <div class="container-fluid">
            <i class='bx bxl-graphql bx-spin' style='color:#d66868; font-size: 50px;'></i>
            <a class="navbar-brand" href="/index.html">
                <span id="title">Anokha</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll"
                aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarScroll">
                <ul class="navbar-nav ms-auto my-2 my-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 100px;">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Language
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('en')">English</a></li>
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('hi')">Hindi</a></li>
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('ta')">Tamil</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <main class="container mt-5 pt-5">
        <div class="row justify-content-center align-items-center min-vh-100">
            <div class="col-md-6 col-lg-4">
                <div class="card shadow-lg border-0 rounded">
                    <div class="card-body p-4">
                        <h2 class="text-center mb-4">Sign Up</h2>
                        <form id="signup-form">
                            <div class="mb-3">
                                <label for="username" class="form-label">Username</label>
                                <input type="text" class="form-control" id="username" required>
                            </div>
                            <div class="mb-3">
                                <label for="email" class="form-label">Email address</label>
                                <input type="email" class="form-control" id="email" required>
                            </div>
                            <div class="mb-3">
                                <label for="phone-number" class="form-label">Phone Number</label>
                                <input type="text" class="form-control" id="phone-number" required>
                            </div>
                            <div class="mb-3">
                                <label for="password" class="form-label">Password</label>
                                <input type="password" class="form-control" id="password" required>
                            </div>
                            <div class="mb-3">
                                <label for="confirm-password" class="form-label">Confirm Password</label>
                                <input type="password" class="form-control" id="confirm-password" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100" style="background-color: #d66868; border: none;">Sign Up</button>
                            <p class="mt-3 text-center">
                                Already have an account? <a href="/login" style="color: #d66868;">Login</a>
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer mt-auto py-3 bg-white text-center">
        <div class="container">
            <span class="text-muted">Copy Right - @Team <b>YUKTHI</b> - 2024</span>
        </div>
    </footer>

    <script>
        document.getElementById('signup-form').addEventListener('submit', async function (e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const phoneNumber = document.getElementById('phone-number').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            if (password !== confirmPassword) {
                alert('Passwords do not match. Please try again.');
                return;
            }

            const response = await fetch('/api/signup', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ username, password, phoneNumber, email }),
            });

            const result = await response.json();
            if (result.response === 'signup') {
                window.location.href = '/login'; // Redirect to login page upon successful signup
            } else {
                alert(result.response);
            }
        });

        const translations = {
            en: {
                title: "Anokha",
                signUp: "Sign Up",
                username: "Username",
                email: "Email address",
                phoneNumber: "Phone Number",
                password: "Password",
                confirmPassword: "Confirm Password",
                alreadyHaveAccount: "Already have an account?",
                login: "Login"
            },
            hi: {
                title: "अनौखा",
                signUp: "साइन अप करें",
                username: "उपयोगकर्ता नाम",
                email: "ईमेल पता",
                phoneNumber: "फ़ोन नंबर",
                password: "पासवर्ड",
                confirmPassword: "पासवर्ड की पुष्टि कीजिये",
                alreadyHaveAccount: "पहले से ही एक खाता है?",
                login: "लॉग इन करें"
            },
            ta: {
                title: "அனோகா",
                signUp: "பதிவுபெறுக",
                username: "பயனர் பெயர்",
                email: "மின்னஞ்சல் முகவரி",
                phoneNumber: "தொலைபேசி எண்",
                password: "கடவுச்சொல்",
                confirmPassword: "கடவுச்சொல்லை உறுதிப்படுத்தவும்",
                alreadyHaveAccount: "ஏற்கனவே கணக்கு உள்ளதா?",
                login: "உள்நுழை"
            }
        };

        function changeLanguage(lang) {
            document.getElementById("title").textContent = translations[lang].title;
            document.querySelector("h2").textContent = translations[lang].signUp;
            document.querySelector("label[for='username']").textContent = translations[lang].username;
            document.querySelector("label[for='email']").textContent = translations[lang].email;
            document.querySelector("label[for='phone-number']").textContent = translations[lang].phoneNumber;
            document.querySelector("label[for='password']").textContent = translations[lang].password;
            document.querySelector("label[for='confirm-password']").textContent = translations[lang].confirmPassword;
            document.querySelector("button[type='submit']").textContent = translations[lang].signUp;
            document.querySelector("p a").textContent = translations[lang].login;
            document.querySelector("p").firstChild.textContent = translations[lang].alreadyHaveAccount;
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-07l1T94PpG1O2/8ZIkGS5R84lDQDz8NhYuo4W1lT1uB8W5rS3B8XvNeG0D4yBrpP"
        crossorigin="anonymous"></script>
</body>

</html>
